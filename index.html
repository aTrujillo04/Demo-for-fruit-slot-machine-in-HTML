<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0", maximum-scale=1.0, user-scalable=no
<title>Play City Slots</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&display=swap" rel="stylesheet">
<style>
body{
  margin:0;
  padding:0;
  font-family:'Georgia',serif;
  display:flex;
  flex-direction:column;
  justify-content:flex-start;
  align-items:center;
  min-height:100vh;
  background: radial-gradient(circle at top, #1a1a2e, #0d0d1a);
  color:white;
  overflow:hidden;
  position:relative;
}

/* Canvas de fondo */
#background-canvas{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  z-index:0;
}

/* TÃ­tulos */
.page-title{
  text-align:center;
  margin-top:40px; 
  position:relative;
  z-index:2;
}
.page-title h1{
  font-family:'Cinzel Decorative',serif;
  font-size:3rem;
  color:#FFD700;
  margin:0;
  text-shadow:0 0 25px rgba(255,215,0,0.8);
}
.page-title h2{
  font-size:1.7rem;
  color:#f0e68c;
  font-style:italic;
  margin-top:20px; /* espacio entre los tÃ­tulos */
  margin-bottom:60px; /* espacio entre tÃ­tulo y mÃ¡quina */
  text-shadow:0 0 15px rgba(255,215,0,0.5);
}

/* MÃ¡quina */
.slot-machine-container{
  position:relative;
  width:800px;
  padding:40px 30px;
  border-radius:40px;
  background: linear-gradient(145deg,#2b2b3c,#1a1a2a);
  border:10px solid #FFD700;
  box-shadow:0 25px 80px rgba(0,0,0,0.9), inset 0 0 40px rgba(255,215,0,0.2);
  text-align:center;
  z-index:2;
  margin-top:0px; /* margen ajustado desde h2 */
}
.machine-title{
  width:100%;
  height:100px;
  display:flex;
  justify-content:center;
  align-items:center;
  margin-bottom:20px;
}
.machine-logo{
  max-width:80%;
  max-height:100%;
  object-fit:contain;
}
.reels-wrapper{
  display:flex;
  justify-content:space-around;
  background:linear-gradient(to bottom,#3c3c4c,#1a1a2a);
  border:6px solid #FFD700;
  border-radius:25px;
  padding:25px;
  box-shadow: inset 0 0 40px rgba(255,215,0,0.3),0 8px 25px rgba(0,0,0,0.6);
  position:relative;
  overflow:hidden;
  height:220px;
}
.reel{
  width:200px;
  height:220px;
  background:#111;
  border-radius:20px;
  overflow:hidden;
  position:relative;
  box-shadow: inset 0 0 25px rgba(255,215,0,0.3),0 5px 15px rgba(0,0,0,0.6);
}
.reel-track{
  display:flex;
  flex-direction:column;
  transition:transform 0.5s ease-out;
}
.symbol{
  font-size:4.2rem;
  height:220px;
  width:100%;
  display:flex;
  justify-content:center;
  align-items:center;
}
.result{
  margin-top:25px;
  padding:15px;
  border-radius:20px;
  border:2px solid #FFD700;
  background:rgba(255,215,0,0.05);
  color:#FFD700;
  font-weight:bold;
  font-size:1.6rem;
  min-height:60px;
  transition:all 0.5s ease;
  text-align:center;
  text-shadow:0 0 12px rgba(255,215,0,0.6);
}

/* Palanca */
.lever-container{
  position:absolute;
  right:-120px;
  top:140px;
  width:35px;
  height:220px;
  cursor:pointer;
  perspective:800px;
  z-index:2;
}
.lever-base{
  width:100%;
  height:40px;
  background:#b8860b;
  border-radius:20px;
  position:absolute;
  bottom:0;
}
.lever{
  width:35px;
  height:220px;
  background:linear-gradient(to bottom,#FFD700,#b8860b);
  border-radius:20px;
  position:absolute;
  bottom:40px;
  box-shadow:0 10px 25px rgba(0,0,0,0.6), inset 0 0 8px rgba(255,215,0,0.3);
  transform-origin:bottom center;
  transition: transform 0.3s ease;
}
.lever-ball{
  width:60px;
  height:60px;
  background:radial-gradient(circle,#FFD700,#b8860b);
  border-radius:50%;
  position:absolute;
  top:-60px;
  left:-13px;
  box-shadow:0 0 35px rgba(255,215,0,0.8);
  transition: transform 0.3s ease;
}
.lever-container:active .lever{
  transform: rotateX(-45deg);
}
.lever-container:active .lever-ball{
  transform: translateZ(50px);
}

/* Imagen Octopy */
.corner-text{
  position:fixed;
  bottom:15px;
  right:20px;
  z-index:2;
}
.corner-text img{
  max-width:200px;
  height:auto;
}

/* Confeti */
.confetti-piece{
  position:absolute;
  border-radius:50%;
  top:-10px;
  z-index:3;
}
</style>
</head>
<body>

<canvas id="background-canvas"></canvas>

<div class="page-title">
  <h1>Â¡Bienvenido a Play City!</h1>
  <h2>Â¡Descubre tu suerte!</h2>
</div>

<div class="slot-machine-container">
  <div class="machine-title">
    <img src="https://playcity.click/wp-content/uploads/2024/09/playcity-logo.png" class="machine-logo" alt="Play City">
  </div>
  <div class="reels-wrapper">
    <div class="reel"><div class="reel-track" id="reel1"></div></div>
    <div class="reel"><div class="reel-track" id="reel2"></div></div>
    <div class="reel"><div class="reel-track" id="reel3"></div></div>
  </div>
  <div class="result" id="result">Â¡Tira la palanca para jugar!</div>
  <div class="lever-container" onclick="pullLever()">
    <div class="lever-base"></div>
    <div class="lever">
      <div class="lever-ball"></div>
    </div>
  </div>
</div>

<div class="corner-text">
  <img src="https://octopy.com/wp-content/uploads/2022/09/logo_octopy.svg" alt="Octopy">
</div>

<!-- AUDIOS -->
<audio id="spin-sound" src="spin.mp3" preload="auto"></audio>
<audio id="win-sound" src="celebrar.mp3" preload="auto"></audio>
<audio id="lose-sound" src="derrota.mp3" preload="auto"></audio>

<script>
// ======= FONDO =======
const canvas = document.getElementById('background-canvas');
const ctx = canvas.getContext('2d');
let w = canvas.width = window.innerWidth;
let h = canvas.height = window.innerHeight;
const lines = [];
for(let i=0;i<50;i++){
  lines.push({x:Math.random()*w, y:Math.random()*h, speed:0.5+Math.random()*1.5, amplitude:20+Math.random()*40, frequency:0.005+Math.random()*0.01, offset:Math.random()*1000});
}
function animateBackground(time){
  ctx.clearRect(0,0,w,h);
  ctx.lineWidth=2;
  lines.forEach(line=>{
    ctx.strokeStyle = 'rgba(0,191,255,0.2)';
    ctx.beginPath();
    for(let x=0;x<w;x+=20){
      let y = line.y + Math.sin(x*line.frequency + time*0.002 + line.offset)*line.amplitude;
      if(x===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
    }
    ctx.stroke();
    line.y += line.speed;
    if(line.y>h+50) line.y=-50;
  });
  requestAnimationFrame(animateBackground);
}
animateBackground(0);
window.addEventListener('resize',()=>{
  w=canvas.width=window.innerWidth;
  h=canvas.height=window.innerHeight;
});

// ======= MÃQUINA =======
const symbols=[
  {icon:'ðŸ§¢'}, {icon:'ðŸ‘•'}, {icon:'ðŸŽŸï¸'}, {icon:'ðŸ¹'}, {icon:'ðŸŽ²'}, {icon:'ðŸš™'}
];
let isSpinning=false;
const reelsTracks=[
  document.getElementById('reel1'),
  document.getElementById('reel2'),
  document.getElementById('reel3')
];
// Inicializar aleatorio
reelsTracks.forEach(track=>{
  for(let i=0;i<50;i++){
    const div=document.createElement('div');
    div.className='symbol';
    div.textContent=symbols[Math.floor(Math.random()*symbols.length)].icon;
    track.appendChild(div);
  }
});

function pullLever(){
  if(isSpinning) return;
  isSpinning=true;
  const spinSound = document.getElementById('spin-sound');
  spinSound.currentTime=0;
  spinSound.play();
  
  const results=[];
  let completed=0;

  // Determinar premio
  const prizeChance = Math.random() < 0.35; // 35% premio
  let prizeSymbol = '';
  if(prizeChance){
    const rnd=Math.random()*100;
    if(rnd<1) prizeSymbol='ðŸš™';
    else if(rnd<4) prizeSymbol='ðŸŽ²';
    else if(rnd<14) prizeSymbol='ðŸ¹';
    else if(rnd<24) prizeSymbol='ðŸ§¢';
    else if(rnd<34) prizeSymbol='ðŸ‘•';
    else prizeSymbol='ðŸŽŸï¸';
  }

  reelsTracks.forEach((track,i)=>{
    const winner = prizeChance ? prizeSymbol : symbols[Math.floor(Math.random()*symbols.length)].icon;
    results[i]=winner;

    for(let k=0;k<45;k++){
      const div=document.createElement('div');
      div.className='symbol';
      div.textContent=symbols[Math.floor(Math.random()*symbols.length)].icon;
      track.appendChild(div);
    }
    for(let k=0;k<5;k++){
      const div=document.createElement('div');
      div.className='symbol';
      div.textContent=winner;
      track.appendChild(div);
    }

    const totalHeight=track.scrollHeight;
    const duration=3200+i*400;
    const start=performance.now();
    function animate(time){
      let progress=(time-start)/duration;
      if(progress>1) progress=1;
      const ease=1-Math.pow(1-progress,5);
      track.style.transform=`translateY(-${ease*(totalHeight-220)}px)`;
      if(progress<1) requestAnimationFrame(animate);
      else{
        completed++;
        if(completed===reelsTracks.length){
          showResult(results);
          isSpinning=false;
        }
      }
    }
    requestAnimationFrame(animate);
  });
}

function showResult(res){
  const [a,b,c]=res;
  const resultBox=document.getElementById('result');
  if(a===b && b===c){
    let message='';
    switch(a){
      case 'ðŸš™': message='Â¡Ganaste una camioneta SUV, felicidades! ðŸŽ‰ðŸš—âœ¨'; break;
      case 'ðŸ§¢': message='Â¡Felicidades, a estrenar gorra nueva! ðŸ¥³ðŸ§¢ðŸŽŠ'; break;
      case 'ðŸ‘•': message='Â¡Felicidades, tienes una playera nueva! ðŸŽ‰ðŸ‘•âœ¨'; break;
      case 'ðŸ¹': message='Â¡Ganaste una bebida gratis, salud! ðŸ¥¤ðŸŽ‰'; break;
      case 'ðŸŽŸï¸': message='Â¡15% de descuento en barra, a disfrutar! ðŸŽŸï¸ðŸŽ‰'; break;
      case 'ðŸŽ²': message='Â¡Tiro gratis en una ruleta, todo al rojo! ðŸŽ²ðŸŽ‰'; break;
    }
    resultBox.textContent=message;
    resultBox.style.color='#FFD700';
    playConfetti();
    playResultSound(true); // SONIDO GANADOR
  } else if(a===b || b===c || a===c){
    resultBox.textContent='Â¡Casi! Â¿Te animas de nuevo?';
    resultBox.style.color='#FFA500';
    playResultSound(false);
  } else {
    resultBox.textContent='Â¡Buena suerte para la prÃ³xima!';
    resultBox.style.color='#b8860b';
    playResultSound(false);
  }
}

function playConfetti(){
  const confettiCount = 500;
  for(let i=0;i<confettiCount;i++){
    const div=document.createElement('div');
    div.className='confetti-piece';
    div.style.left=Math.random()*window.innerWidth+'px';
    div.style.top = -20 + 'px';
    div.style.background=['#FFD700','#FF4500','#FF69B4','#00BFFF','#ADFF2F'][Math.floor(Math.random()*5)];
    const size = 5 + Math.random()*12;
    div.style.width = size+'px';
    div.style.height = size+'px';
    div.style.opacity = 0.7 + Math.random()*0.3;
    document.body.appendChild(div);

    const amplitudeX = 50 + Math.random()*150;
    const speedY = 2 + Math.random()*3;
    const speedX = 0.01 + Math.random()*0.03;
    let posX = parseFloat(div.style.left);
    let posY = parseFloat(div.style.top);
    let phase = Math.random()*Math.PI*2;

    function animateConfetti(){
      posY += speedY;
      posX += Math.sin(phase)*amplitudeX*0.01;
      phase += speedX;
      div.style.transform = `translate(${posX}px, ${posY}px) rotate(${phase*180/Math.PI}deg)`;
      if(posY < window.innerHeight + 50){
        requestAnimationFrame(animateConfetti);
      } else {
        div.remove();
      }
    }
    requestAnimationFrame(animateConfetti);
  }
}

// FUNCION SONIDOS RESULTADO
function playResultSound(isWinner) {
  const winSound = document.getElementById("win-sound");
  const loseSound = document.getElementById("lose-sound");

  // Reinicia los sonidos antes de reproducir
  winSound.pause();
  loseSound.pause();
  winSound.currentTime = 0;
  loseSound.currentTime = 0;

  if (isWinner) {
    winSound.play();
  } else {
    loseSound.play();
  }
}
</script>
</body>
</html>









